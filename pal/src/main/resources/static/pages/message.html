
<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>消息界面</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<link rel="stylesheet" type="text/css" href="css/animate.css">
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="css/line-awesome.css">
		<link rel="stylesheet" type="text/css" href="css/line-awesome-font-awesome.min.css">
		<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
		<link rel="stylesheet" type="text/css" href="css/jquery.mCustomScrollbar.min.css">
		<link rel="stylesheet" type="text/css" href="lib/slick/slick.css">
		<link rel="stylesheet" type="text/css" href="lib/slick/slick-theme.css">
		<link rel="stylesheet" type="text/css" href="css/style.css">
		<link rel="stylesheet" type="text/css" href="css/responsive.css">
		<link rel="stylesheet" type="text/css" href="css/iconfont.css" />
		<link rel="stylesheet" type="text/css" href="css/radio.css" />
		<link rel="stylesheet" type="text/css" href="css/pay.css" />
		<style>
			body{
				background: url(images/bg.jpg) no-repeat center;
				background-size: contain;
			}
			.msgs-list{
				height: 722px;overflow: hidden;
			}
			.msgs-list>.messages-list{
				height: 722px;
				width: 100%;
				overflow-y: scroll !important;
			}
			.face{
				width: 560px;padding: 10px;background: #51a5fb;display: none;
				position:absolute;
				bottom:40px;
				z-index: 9999;
			}
			.face>img {
				border: 1px solid #EEEEEE;
				padding: 3px;
				background: #FFFFFF;
			}
			#image-show{
				position: absolute;
				bottom: 90px;
				z-index: 999;
			}
			#image-show>img{
				width: 150px;
			}
		</style>
	</head>


	<body>
		

		<div class="wrapper" id="app">
			

	<!-- 头部--------------------start -->
				<header>
					<div class="container">
						<div class="header-data">
							<div class="logo">
								<a href="index.html" title=""><img src="images/logo.png" alt=""></a>
							</div><!--logo end-->
							<div class="search-bar">
							
							</div><!--search-bar end-->
							<nav>
								<ul>
									<li>
										<a href="index.html" title="" >
											<span><img src="images/icon1.png" alt=""></span>
											{{topLabel[5]}}
										</a>
									</li>
									<li>
										<a @click="toView(1)" title="" >
											<span><img src="images/icon2.png" alt=""></span>
											{{topLabel[3]}}
										</a>
									</li>
									<li>
										<a @click="toView(2)"  title="" >
											<span><img src="images/icon3.png" alt=""></span>
											{{topLabel[4]}}
										</a>
									</li>
									<li>
										<a href="profile.html" title="" >
											<span><img src="images/icon4.png" alt=""></span>
											{{topLabel[0]}}
										</a>
									</li>
									
									<li>
										<a title="" class="not-box-open" >
											<span><img src="images/icon6.png" alt=""></span>
											{{topLabel[1]}}
										</a>
									</li>
									<li>
										<a @click="logout" title="" class="not-box-open" >
											<span><img src="images/icon7.png" alt=""></span>
											{{topLabel[2]}}
										</a>
									</li>
								</ul>
							</nav><!--nav end-->
							<div class="menu-btn">
								<a href="#" title=""><i class="fa fa-bars"></i></a>
							</div><!--menu-btn end-->
							<div class="user-account">
								<div class="user-info" style="width: 150px;">
									<select style="background: #E44D3A;border: none;color: white;" 
									class="form-control form-control-lg language" v-model="languageID" @click="change">
										<option selected="true" value="1">中文简体</option>
										<option value="2">中文-繁體</option>
										<option value="3">English</option>
										<option value="4">한국어</option>
										<option value="5">にほんご</option>
										<option value="6">ภาษาไทย</option>
									</select>
								</div>
							</div>
						</div><!--header-data end-->
					</div>
				</header><!--header end-->	
				<!-- 头部--------------------end -->

				

			<section class="messages-page">
				<div class="container">
					<div class="messages-sec">
						<div class="row">
							<div class="col-lg-4 col-md-12 no-pdd" style="padding-bottom: 80px;background: #51A5FB">
								<div class="msgs-list" style="background: #51A5FB;">
									<div class="msg-title" style="border-bottom: 1px solid #eeeeee;" ref="messageLink">
										<h3>Messages</h3>
									</div><!--msg-title end-->

									<div :style="{width:linkWidth + 'px'}" class="messages-list">
										<ul>
											<li v-for="(item, index) in linkMan" @click="toDetailView(index)" :id="index" v-bind:class="{ active: (index == indexTemp) }">
												<div class="usr-msg-details">
													<div class="usr-ms-img">
														<template v-if="item.view.user.headStatus == 1">
															<img :src="headLink" alt="" style="width:50px;height:50px;border-radiu:100%;">
														</template>
														<template v-else>
															<img :src="item.view.user.headLink" alt="" style="width:50px;height:50px;border-radiu:100%;">
														</template>
														<template v-if="item.view.count > 0">
															<span class="msg-status"></span>
														</template>
													</div>
													<div class="row usr-mg-info" style="align-items: center;">
														<h3>{{item.view.user.username}}</h3>
														<h3 style="border-radius: 6px;text-align: center;background: #00B540;width: 12px;height: 12px;display: block;margin-left: 3px;" v-if="item.view.user.onLineStatus == 0"></h3>
													</div><!--usr-mg-info end-->
													<div style="align-items: center;">
														<img src="images/huangguan.png" style="width: 16px;height: 16px;margin-left: 5px;"  v-if="item.view.member == 1"/>
														<img src="images/zuanshi.png" style="width: 16px;height: 16px;margin-left: 5px;"  v-if="item.view.member == 2"/>
													</div>
													<template v-if="item.view.count > 0">
														<span class="msg-notifc">{{item.view.count}}</span>
													</template>
												</div><!--usr-msg-details end-->
											</li>
											
										</ul>
									</div><!--messages-list end-->
								</div><!--msgs-list end-->
							</div>
							<div class="col-lg-8 col-md-12 pd-right-none pd-left-none">
								<div class="main-conversation-box">
									<div class="message-bar-head" v-if="indexTemp != -1">
										<div class="usr-msg-details">
											<div class="usr-ms-img">
												<template v-if="linkMan[indexTemp].view.user.headStatus == 1">
													<img :src="headLink" alt="">
												</template>
												<template v-else>
													<img :src="linkMan[indexTemp].view.user.headLink" alt="">
												</template>
											</div>
											<div class="usr-mg-info">
												<div class="row" style="align-items: center;">
													<h3>
														{{linkMan[indexTemp].view.user.username}}
													</h3>
													<h3 style="border-radius: 6px;text-align: center;background: #00B540;width: 12px;height: 12px;display: block;margin-left: 3px;" v-if="linkMan[indexTemp].view.user.onLineStatus == 0"></h3>
													<img src="images/huangguan.png" style="width: 16px;height: 16px;margin-left: 5px;"  v-if="linkMan[indexTemp].view.member == 1"/>
													<img src="images/zuanshi.png" style="width: 16px;height: 16px;margin-left: 5px;"  v-if="linkMan[indexTemp].view.member == 2"/>
												</div>
												
											</div><!--usr-mg-info end-->
										</div>
										<a href="#" title=""><i class="fa fa-ellipsis-v"></i></a>
									</div>
									<div class="messages-line mCustomScrollbar _mCS_1" style="margin-top: 80px;">
										<div id="mCSB_1" class="mCustomScrollBox mCS-light mCSB_vertical mCSB_inside" style="max-height: none;" tabindex="0">
											<div id="mCSB_1_container" class="mCSB_container" style="position:relative; top:0; left:0;padding-top:20px;" dir="ltr">
												<template v-for="(item, index) in message">
													<div class="main-message-box ta-right" v-if="item.view.flag == true">
														<div class="message-dt" style="float: right !important;">
															<div class="message-inner-dt" v-if="item.view.message.image == ''">
																<p v-html="item.view.message.content" style="word-break:break-all;"></p>
															</div>
															<div class="message-inner-dt img-bx" v-if="item.view.message.image">
																<p v-if="item.view.message.content" v-html="item.view.message.content" style="word-break:break-all;"></p>
																<img :src="item.view.message.image" alt="" style="width: 150px;height: 150px;">
															</div>
															<span>{{item.view.createDate}}</span>
														</div>
														<div class="messg-usr-img">
															<template v-if="item.view.user.headStatus==1">
																<img :src="headLink" alt="" style="width:50px;height:50px;" class="mCS_img_loaded">
															</template>
															<template v-else>
																<img :src="item.view.user.headLink" style="width:50px;height:50px;" class="mCS_img_loaded" >
															</template>
														</div>
													</div>
													
													<div class="main-message-box st3" v-else>
														<div class="message-dt st3">
															<div class="message-inner-dt" v-if="item.view.message.image == ''">
																<p v-html="item.view.message.content" style="word-break:break-all;"></p>
															</div>
															<div class="message-inner-dt img-bx" v-if="item.view.message.image">
																<p v-if="item.view.message.content" v-html="item.view.message.content" style="word-break:break-all;"></p>
																<img :src="item.view.message.image" alt="" style="width: 150px;height: 150px;">
															</div>
															<span>{{item.view.createDate}}</span>
														</div>
														<div class="messg-usr-img">
															<template v-if="item.view.user.headStatus==1">
																<img :src="headLink" alt="" style="width:50px;height:50px;" class="mCS_img_loaded" >
															</template>
															<template v-else>
																<img :src="item.view.user.headLink" style="width:50px;height:50px;" class="mCS_img_loaded">
															</template>
														</div>
													</div>
												</template>							
																		
											</div>
											<div id="mCSB_1_scrollbar_vertical" class="mCSB_scrollTools mCSB_1_scrollbar mCS-light mCSB_scrollTools_vertical" style="display: block;">
												<div class="mCSB_draggerContainer">
													<div id="mCSB_1_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 30px; display: block; height: 367px; max-height: 594px; top: 0px;">
														<div class="mCSB_dragger_bar" style="line-height: 30px;"></div>
													</div>
													<div class="mCSB_draggerRail"></div>
												</div>
											</div>
										</div>
									</div>
									
									<div class="message-send-area">
										<form>
											<div class="mf-field">
												<input type="text" name="message"  v-model="content" placeholder="Type a message here" autocomplete="off">
												<a @click="sendMessage" class="btn btn-danger"  style="margin-left: 15px;">Send</a>
											</div>
											<ul>
												<li><a class="emjoi" @click="showEmoji" title=""><i class="fa fa-smile-o"></i></a></li>
												<li>
													<label>
														<span class="fa fa-camera"></span>
														<input  type="file" style="display: none;" v-on:change="onChange($event)"/>
													</label>
												</li>
											</ul>
											<div class="face">
												<img v-on:click="getContent($event)" src="face/weixiao.gif">
												<img v-on:click="getContent($event)" src="face/xixi.gif">
												<img v-on:click="getContent($event)" src="face/haha.gif">
												<img v-on:click="getContent($event)" src="face/keai.gif">
												<img v-on:click="getContent($event)" src="face/kelian.gif">
												<img v-on:click="getContent($event)" src="face/wabi.gif">
												<img v-on:click="getContent($event)" src="face/chijing.gif">
												<img v-on:click="getContent($event)" src="face/haixiu.gif">
												<img v-on:click="getContent($event)" src="face/jiyan.gif">
												<img v-on:click="getContent($event)" src="face/bizui.gif">
												<img v-on:click="getContent($event)" src="face/bishi.gif">
												<img v-on:click="getContent($event)" src="face/aini.gif">
												<img v-on:click="getContent($event)" src="face/lei.gif">
												<img v-on:click="getContent($event)" src="face/touxiao.gif">
												<img v-on:click="getContent($event)" src="face/qinqin.gif">
												<img v-on:click="getContent($event)" src="face/shengbing.gif">
												<img v-on:click="getContent($event)" src="face/taikaixin.gif">
												<img v-on:click="getContent($event)" src="face/baiyan.gif">
												<img v-on:click="getContent($event)" src="face/youhengheng.gif">
												<img v-on:click="getContent($event)" src="face/zuohengheng.gif">
												<img v-on:click="getContent($event)" src="face/xu.gif">
												<img v-on:click="getContent($event)" src="face/shuai.gif">
												<img v-on:click="getContent($event)" src="face/tu.gif">
												<img v-on:click="getContent($event)" src="face/haqian.gif">
												<img v-on:click="getContent($event)" src="face/baobao.gif">
												<img v-on:click="getContent($event)" src="face/nu.gif">
												<img v-on:click="getContent($event)" src="face/yiwen.gif">
												<img v-on:click="getContent($event)" src="face/chanzui.gif">
												<img v-on:click="getContent($event)" src="face/baibai.gif">
												<img v-on:click="getContent($event)" src="face/sikao.gif">
												<img v-on:click="getContent($event)" src="face/han.gif">
												<img v-on:click="getContent($event)" src="face/kun.gif">
												<img v-on:click="getContent($event)" src="face/shui.gif">
												<img v-on:click="getContent($event)" src="face/qian.gif">
												<img v-on:click="getContent($event)" src="face/shiwang.gif">
												<img v-on:click="getContent($event)" src="face/ku.gif">
												<img v-on:click="getContent($event)" src="face/se.gif">
												<img v-on:click="getContent($event)" src="face/heng.gif">
												<img v-on:click="getContent($event)" src="face/guzhang.gif">
												<img v-on:click="getContent($event)" src="face/yun.gif">
												<img v-on:click="getContent($event)" src="face/beishang.gif">
												<img v-on:click="getContent($event)" src="face/zhuakuang.gif">
												<img v-on:click="getContent($event)" src="face/heixian.gif">
												<img v-on:click="getContent($event)" src="face/yinxian.gif">
												<img v-on:click="getContent($event)" src="face/numa.gif">
												<img v-on:click="getContent($event)" src="face/hufen.gif">
												<img v-on:click="getContent($event)" src="face/shudaizi.gif">
												<img v-on:click="getContent($event)" src="face/fennu.gif">
												<img v-on:click="getContent($event)" src="face/ganmao.gif">
												<img v-on:click="getContent($event)" src="face/xin.gif">
												<img v-on:click="getContent($event)" src="face/shangxin.gif">
												<img v-on:click="getContent($event)" src="face/zhu.gif">
												<img v-on:click="getContent($event)" src="face/xiongmao.gif">
												<img v-on:click="getContent($event)" src="face/tuzi.gif">
											</div>
											<div id="image-show">
												<img :src="showImage" v-if="showImage" />
											</div>
										</form>
									</div><!--message-send-area end-->
								</div><!--main-conversation-box end-->
							</div>
						</div>
					</div><!--messages-sec end-->
				</div>
			</section><!--messages-page end-->
			


			<footer>
				<div class="footy-sec mn no-margin">
					<div class="container">
						<ul>
							<li><a href="#" title="">Help Center</a></li>
							<li><a href="#" title="">Privacy Policy</a></li>
							<li><a href="#" title="">Community Guidelines</a></li>
							<li><a href="#" title="">Cookies Policy</a></li>
							<li><a href="#" title="">Career</a></li>
							<li><a href="#" title="">Forum</a></li>
							<li><a href="#" title="">Language</a></li>
							<li><a href="#" title="">Copyright Policy</a></li>
						</ul>
						<p><img src="images/copy-icon2.png" alt="">Copyright 2017</p>
						<img class="fl-rgt" src="images/logo2.png" alt="">
					</div>
				</div>
			</footer>

			<!--遮罩层-->
			<div class="bgPop"></div>
			<!--弹出框-->
			<div class="pop">
				<div class="row" style="background: #2D56A1;">
					<div class="col-11" >
						<ul class="nav nav-tabs" >
							<li role="presentation"  v-bind:class="{ active: (1 == payType) }">
								<a href="#menu1" data-toggle="tab" class="btn btn-warning" @click="changeType(1)">{{payTop[0]}}</a>
							</li>
							<li role="presentation"  v-bind:class="{ active: (2 == payType) }">
								<a href="#menu2" data-toggle="tab" class="btn btn-warning" @click="changeType(2)">{{payTop[1]}}</a>
							</li>
						</ul>
					</div>
					<div class="col-1" style="font-size: 35px;padding-top:10px;color:white;">
						<span class="pop-close" @click="closeView">Ｘ</span>
					</div>
				</div>
				
				<div class="tab-content">
					<div id="menu1" class="container-fluid tab-pane" v-bind:class="{ active: (1 == payType) }">
						<!-- 升级-----------start -->
						<div class="row" style="margin: 10px 0;">
							<div style="margin-right: 25px;">
								<div class="RadioStyle">
								    <div class="Block PaddingL">
								        <input type="radio" name="upgradeType" id="model1-1" v-model="upgradeType" value="1"/>
								        <label for="model1-1">{{upgradeLabel[0]}}</label>
								    </div>
								</div>
							</div>
							<div style="margin-right: 25px;">
								<div class="RadioStyle">
								    <div class="Block PaddingL">
								        <input type="radio" name="upgradeType" id="model1-2" v-model="upgradeType" value="2"/>
								        <label for="model1-2">{{upgradeLabel[1]}}</label>
								    </div>
								</div>
							</div>
							<template v-if="upgradeType == 2">
								<div>
									<input type="text" class="form-control" v-model="otherUsername" id="" :placeholder="btnLabel[0]">
								</div>
								<div>
									<a class="btn btn-primary" @click="getOtherUser">{{searchLabel}}</a>
								</div>
							</template>
						</div>
						<!-- 为别人升级---------start -->
						<template v-if="otherUser!='' && upgradeType == 2">
							<div class="row">
								<div class="RadioStyle">
								    <div class="Block PaddingL">
								        <input type="radio" name="gift" id="otherUser" />
								        <label for="otherUser" style="text-align:center;">
											<template v-if="otherUser.headStatus == 1">
												<img :src="headLink" alt="" width="100px" height="100px">
											</template>
											<template v-else>
												<img :src="otherUser.headLink" alt="" width="100px" height="100px">
											</template>
											<br>
											<span>{{otherUser.username}}</span>
										</label>
								    </div>
								</div>
							</div>
						</template>
						<!-- 为别人升级----------end -->
						<div class="row">
							<div class="col-5" style="border: 1px solid #B9B9B9;margin-right: 15px;padding: 10px 20px 20px 20px;">
								<div>
									<label style="margin-right: 10px;">
										<img src="images/pay/huangguan.png" width="40px"/>
									</label>
									<label>
										<h5>{{typeLabel[0]}}</h5>
									</label>
								</div>
								<div class="row">
									<div style="width: 50%;">
										<label>
											<img src="images/pay/duigou.png" width="25px"/>
										</label>
										<label>{{upgrade1[0]}}</label>
									</div>
									<div style="width: 50%;">
										<label>
											<img src="images/pay/duigou.png" width="25px"/>
										</label>
										<label>{{upgrade1[1]}}</label>
									</div>
								</div>
								<div class="row">
									<div style="width: 50%;">
										<label>
											<img src="images/pay/duigou.png" width="25px"/>
										</label>
										<label>{{upgrade1[2]}}</label>
									</div>
									<div style="width: 50%;">
										<label>
											<img src="images/pay/duigou.png" width="25px"/>
										</label>
										<label>{{upgrade1[3]}}</label>
									</div>
								</div>
								<div class="row">
									<div style="width: 50%;">
										<label>
											<img src="images/pay/duigou.png" width="25px"/>
										</label>
										<label>{{upgrade1[4]}}</label>
									</div>
									<div style="width: 50%;">
										<label>
											<img src="images/pay/duigou.png" width="25px"/>
										</label>
										<label>{{upgrade1[5]}}</label>
									</div>
								</div>
								<div class="RadioStyle">
								    <div class="Block PaddingL">
								        <div class="row">
											<input type="radio" name="crown" id="model1-3" v-model="crown" value="102"/>
											<label for="model1-3">
												<span>102USD / 1月</span>
												<span>102USD /月</span>
												<span>节省0.00％</span>
											</label>
										</div>
										<div class="row">
											<input type="radio" name="crown" id="model1-4" v-model="crown" value="262"/>
											<label for="model1-4">
												<span>262USD / 3月</span>
												<span>87.33USD /月</span>
												<span>节省14.38％</span>
											</label>
										</div>
										<div class="row">
											<input type="radio" name="crown" id="model1-5"  v-model="crown" value="468"/>
											<label for="model1-5">
												<span>468USD / 6月</span>
												<span>78USD /月</span>
												<span>节省23.52％</span>
											</label>
										</div>
										<div class="row">
											<input type="radio" name="crown" id="model1-6"  v-model="crown" value="786"/>
											<label for="model1-6">
												<span>786USD / 12月</span>
												<span>65.50USD /月</span>
												<span>节省35.78％</span>
											</label>
										</div>
								    </div>
								</div>
							</div>
							<div class="col-5" style="border: 1px solid #B9B9B9;margin-right: 15px;padding: 10px 20px 20px 20px;">
								<div>
									<label style="margin-right: 10px;">
										<img src="images/pay/zuanshi.png" width="40px"/>
									</label>
									<label>
										<h5>{{typeLabel[1]}}</h5>
									</label>
								</div>
								<div class="row">
									<div style="width: 50%;">
										<label>
											<img src="images/pay/duigou.png" width="25px"/>
										</label>
										<label>{{upgrade1[0]}}</label>
									</div>
									<div style="width: 50%;">
										<label>
											<img src="images/pay/duigou.png" width="25px"/>
										</label>
										<label>{{upgrade1[1]}}</label>
									</div>
								</div>
								<div class="row">
									<div style="width: 50%;">
										<label>
											<img src="images/pay/duigou.png" width="25px"/>
										</label>
										<label>{{upgrade1[2]}}</label>
									</div>
									<div style="width: 50%;">
										<label>
											<img src="images/pay/duigou.png" width="25px"/>
										</label>
										<label>{{upgrade1[3]}}</label>
									</div>
								</div>
								
								<div class="RadioStyle">
								    <div class="Block PaddingL">
								        <div class="row">
											<input type="radio" name="crown" id="model1-7"  v-model="crown" value="16"/>
											<label for="model1-7">
												<span>16USD / 1月</span>
												<span>16USD /月</span>
												<span>节省0.00％</span>
											</label>
										</div>
										<div class="row">
											<input type="radio" name="crown" id="model1-8"  v-model="crown" value="46"/>
											<label for="model1-8">
												<span>46USD / 3月</span>
												<span>15.33USD /月</span>
												<span>节省15.33％</span>
											</label>
										</div>
								    </div>
								</div>
							</div>
						</div>
						<div class="row" style="margin-top: 10px;">
							<div class="RadioStyle">
							    <div class="Block PaddingL">
							        <input type="radio" name="payment" id="model1-9" v-model="shoptype" value="1"/>
							        <label for="model1-9">
										<img src="images/pay/paypal.png" height="80px"/>
									</label>
							    </div>
							</div>
							<div class="RadioStyle" style="margin-left: 30px;">
							    <div class="Block PaddingL">
							        <input type="radio" name="payment" id="model1-10" v-model="shoptype" value="2"/>
							        <label for="model1-10">
										<img src="images/pay/yue.png" height="80px" width="200px"/>
									</label>
							    </div>
							</div>
						</div>
						<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post" target="_blank" id="sform-1">
							<input type="hidden" name="cmd" value="_xclick">	<!-- 立即支付 -->
							<input type="hidden" name="business" id="business">  <!-- 商家账号-->
							<input id='item_number' type="hidden" name="item_number" value="产品编号"> <!-- 产品编号-->
							<input id='amount' type="hidden" name="amount" >  <!-- 付款/充值金额  -->
							<input type="hidden" name="currency_code" value="USD">	<!-- 货币 -->
							<!-- 支付成功后paypal后台发送回调地址-->
							<input type='hidden' name='notify_url' value='http://47.115.142.159:8080/paysuccess/'>  
							<!-- 支付成功后网页跳转地址-->
							<input type='hidden' name='return' value='http://47.115.142.159:8080/pages/success.html'> 
							<input type='hidden' name='charset' value='utf-8'>	<!-- 字符集 -->
							<input type="hidden" name="no_shipping" value="1"> <!-- 不要求客户提供收货地址 -->
							<input type="hidden" name="bn" value="IC_Sample">
							<input type='hidden' name='rm' value='2'>
							<!-- 自定义变量 -->
							<input type='hidden' name='custom' value='' id="custom">
							<button @click="checkUpgrade"><img src="images/paypal.png"></button>
						</form>
						<!-- 升级-----------end -->
					</div>
					<div id="menu2" class="container-fluid tab-pane" v-bind:class="{ active: (2 == payType) }">
						<!-- 充值---------------------start -->
						<div class="row" style="margin: 10px 0;">
							<div style="margin-right: 25px;">
								<div class="RadioStyle">
								    <div class="Block PaddingL">
								        <input type="radio" name="rechargeType" id="model2-1" v-model="rechargeType" value="1" />
								        <label for="model2-1">{{rechargeLabel[0]}}</label>
								    </div>
								</div>
							</div>
							<div style="margin-right: 25px;">
								<div class="RadioStyle">
								    <div class="Block PaddingL">
								        <input type="radio" name="rechargeType" id="model2-2" v-model="rechargeType" value="2"/>
								        <label for="model2-2">{{rechargeLabel[1]}}</label>
								    </div>
								</div>
							</div>
							<template v-if="rechargeType == 2">
								<div>
									<input type="text" class="form-control" v-model="rechargeUsername" id="" :placeholder="btnLabel[0]">
								</div>
								<div>
									<a class="btn btn-primary" @click="getRechargeUser">{{searchLabel}}</a>
								</div>
							</template>
						</div>
						<!-- 为别人升级---------start -->
						<template v-if="rechargeUser!='' && rechargeType == 2">
							<div class="row">
								<div class="RadioStyle">
								    <div class="Block PaddingL">
								        <input type="radio" name="gift" id="rechargeUser" />
								        <label for="rechargeUser" style="text-align:center;">
											<template v-if="rechargeUser.headStatus == 1">
												<img :src="headLink" alt="" width="100px" height="100px">
											</template>
											<template v-else>
												<img :src="rechargeUser.headLink" alt="" width="100px" height="100px">
											</template>
											<br>
											<span>{{rechargeUser.username}}</span>
										</label>
								    </div>
								</div>
							</div>
						</template>
						<!-- 为别人升级----------end -->
						<div class="row">
							<div class="RadioStyle row">
							    <div class="Block PaddingL">
							        <input type="radio" name="money" id="model2-3" v-model="money" value="500"/>
							        <label for="model2-3">
										<img src="images/pay/yue.png" height="80px" width="200px" />
										500USB
									</label>
							    </div>
								<div class="Block PaddingL">
								    <input type="radio" name="money" id="model2-4" v-model="money" value="200"/>
								    <label for="model2-4">
										<img src="images/pay/yue.png" height="80px" width="200px"/>
										200USB
									</label>
								</div>
								<div class="Block PaddingL">
								    <input type="radio" name="money" id="model2-5" v-model="money" value="100" />
								    <label for="model2-5">
										<img src="images/pay/yue.png" height="80px" width="200px"/>
										100USB
									</label>
								</div>
							</div>
						</div>
						<div class="row" style="margin-top: 10px;">
							<div class="form-group row" style="align-items: center;">
							    <label for="inputEmail3" class="col-sm-5 col-form-label">{{btnLabel[2]}} : </label>
							    <div class="col-sm-7">
							      <input type="number" class="form-control" id="inputEmail3" v-model="money">
							    </div>
							</div>
						</div>
						<div class="row" style="margin-top: 10px;">
							<div class="RadioStyle">
							    <div class="Block PaddingL">
							        <input type="radio" name="recharge" id="model2-6" v-model="recharge" value="1"/>
							        <label for="model2-6">
										<img src="images/pay/paypal.png" height="80px"/>
									</label>
							    </div>
							</div>
						</div>
						<div class="row" style="margin-top: 10px;">
							<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post" target="_blank" id="sform-2">
								<input type="hidden" name="cmd" value="_xclick">	<!-- 立即支付 -->
								<input type="hidden" name="business" id="business2">  <!-- 商家账号-->
								<input id='item_number' type="hidden" name="item_number" value="产品编号"> <!-- 产品编号-->
								<input id='amount2' type="hidden" name="amount">  <!-- 付款/充值金额  -->
								<!-- 支付成功后paypal后台发送回调地址-->
								<input type='hidden' name='notify_url' value='http://47.115.142.159:8080/paysuccess/'>  
								<!-- 支付成功后网页跳转地址-->
								<input type='hidden' name='return' value='http://47.115.142.159:8080/pages/success.html'> 
								<input type="hidden" name="currency_code" value="USD">	<!-- 货币 -->
								<input type='hidden' name='charset' value='utf-8'>	<!-- 字符集 -->
								<input type="hidden" name="no_shipping" value="1"> <!-- 不要求客户提供收货地址 -->
								<input type="hidden" name="bn" value="IC_Sample">
								<input type='hidden' name='rm' value='2'>
								<!-- 自定义变量 -->
								<input type='hidden' name='custom' id="custom2">
								<a class="btn btn-success" @click="checkRecharge">{{btnLabel[1]}}</a>
							</form>
						</div>
						<!-- 充值-----------------------end -->
					</div>
				</div>
			</div>
			
			<!-- 支付界面-------end -->
			
		</div><!--theme-layout end-->
	</body>
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/popper.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="js/jquery.mCustomScrollbar.js"></script>
	<script type="text/javascript" src="lib/slick/slick.min.js"></script>
	<script type="text/javascript" src="js/scrollbar.js"></script>
	<script type="text/javascript" src="js/script.js"></script>
	<script src="js/vue-2.4.0.js"></script>
	<script src="js/vue-resource-1.3.4.js"></script>
	<script src="js/browser.min.js"></script>
	<script src="js/polyfill.min.js" type="text/javascript" charset="utf-8"></script>
	<script>
		$(document).click(function(event){
			var _con = $('.emjoi');   // 设置目标区域
			var _face = $(".face")
			if(!_con.is(event.target) && _con.has(event.target).length === 0 && !_face.is(event.target) && _face.has(event.target).length === 0){ // Mark 1
				$('.face').hide();          //淡出消失
			}
		});
	</script>
	<script type="text/babel">
		var vm = new Vue({
			el : '#app',
			data:{
				linkWidth:0,
				headLink:"images/user/default.png",
				linkMan:[],
				indexTemp:-1,
				userID:0,
				message:[],
				timer:"",
				linkTimer:"",
				
				showImage:"",
				//发送消息
				content:"",
				image:"",
				takeUrl:"",
				ticket:"",
				account:"",
				
				/* 支付----------------start */
				//升级还是充值
				payType:0,
				//升级---为自己支付,还是为别人支付
				upgradeType:0,
				//为别人升级-显示得用户
				otherUser:"",
				//别人得用户名
				otherUsername:"",
				//选择升级
				crown:0,
				//自定义变量
				upgradeCustom:"",
				//升级支付方式
				shoptype:"",
				//充值-------为自己支付,还是为别人支付
				rechargeType:0,
				//为别人充值得用户
				rechargeUser:"",
				//别人得名字
				rechargeUsername:"",
				//充值金额
				money:0,
				//选择充值方式
				recharge:0,
				//自定义变量
				rechargeCustom:"",
				/* 支付----------------end */
				
				languageID:1,
				topLabel:["个人资料", "消息", "退出", "升级", "充值", "主页"],
				payTop:["升级", "账户充值"],
				upgradeLabel:["为自己升级", "为别人升级"],
				rechargeLabel:["为自己充值", "为别人充值"],
				searchLabel:"搜索",
				typeLabel:["皇冠会员", "钻石会员"],
				upgrade1:["尽情聊天", "查看谁喜欢你", "认识更多单身异性", "让你倍受瞩目", "每日3000字内翻译", "更多展示机会"],
				btnLabel:["用户名", "立即支付", "自由输入"]
			},
			methods:{
				getAccount() {
					this.$http.get('/user/getAccount/',
					{params : {time:new Date().getTime()}}, {header:{cookie:this.ticket}})
					.then(function(res) {
						this.account = res.body.account
					},function() {
						console.log('请求失败处理');
					});
				},
				getContent:function(e) {
					
					var selectedBedDom = e.srcElement
					var url = selectedBedDom.src;
					var start = url.lastIndexOf('/') + 1
					var end = url.lastIndexOf('.')
					var title = '['+ url.substring(start, end) + ']'
					this.content = this.content + title
					
					var face = "<img src='" + url + "'>,"
					this.takeUrl = this.takeUrl + face
					
				},
				showEmoji(){
					$(".face").show()
				},
				onChange(e) {
				    this.image= e.target.files[0]
				    let $target = e.target || e.srcElement
				    let file = $target.files[0]
				    var reader = new FileReader()
				    reader.onload = (data) => {
				    	let res = data.target || data.srcElement
				    	this.showImage = res.result
				    }
				    reader.readAsDataURL(file)  
				},
				toView(payType) {
					this.payType = payType
					$('.bgPop,.pop').show();
				},
				closeView(){
					$('.bgPop,.pop').hide();
				},
				changeType(payType){
					this.payType = payType;
				},
				getOtherUser(){
					this.$http.get('/user/getUserByUsername/',
						{params : {time:new Date().getTime(), username:this.otherUsername}},{header : {cookie:this.ticket}})
					.then(function(res) {
						this.otherUser = res.body.user
					},function() {
						console.log('请求失败处理');
					});
				},
				getRechargeUser(){
					this.$http.get('/user/getUserByUsername/',
						{params : {time:new Date().getTime(), username:this.rechargeUsername}},{header : {cookie:this.ticket}})
					.then(function(res) {
						this.rechargeUser = res.body.user
					},function() {
						console.log('请求失败处理');
					});
				},
				checkUpgrade(){
					if(this.upgradeType == 0 || this.crown == 0 || this.shoptype == 0) {
						return
					}
					if(this.upgradeType == 2 && this.otherUsername == "") {
						return
					}
					if(this.upgradeType == 1) {
						this.upgradeCustom = this.payType + "&" + this.upgradeType + "&" + this.ticket + "&" + this.crown
					} else {
						this.upgradeCustom = this.payType + "&" + this.upgradeType + "&" + this.ticket + "&" + this.crown + "&" + this.otherUsername
					}
					if(this.shoptype == 1) {
						//第三方
						console.log("输出" + this.upgradeCustom)
						document.getElementById("custom").value=this.upgradeCustom
						document.getElementById("amount").value=this.crown
						document.getElementById("business").value = this.account
						document.getElementById("sform-1").submit()
					} else if(this.shoptype == 2){
						//余额
						var formData = new FormData();
						formData.append('upgradeType', this.upgradeType);
						formData.append('money', this.crown);
						formData.append('toUsername', this.otherUsername);
						this.$http.post('/user/updateUserWallet/', formData).
						then(function (res) {
							if(res.body.flag) {
								this.toView(2)
								alert("fail")
							}
						}, function (res) {
						  console.log(res.body);
						});
					}
				},
				checkRecharge(){
					if(this.rechargeType == 0 || this.money == 0 || this.recharge == 0) {
						return
					}
					if(this.rechargeType == 2 && this.rechargeUsername == "" && this.rechargeUser == null) {
						return
					}
					if(this.rechargeType == 1) {
						this.rechargeCustom = this.payType + "&" + this.recharge + "&" + this.ticket + "&" + this.money
					} else {
						this.rechargeCustom = this.payType + "&" + this.recharge + "&" + this.ticket + "&" + this.money + "&" + this.rechargeUsername
					}
					document.getElementById("custom2").value=this.rechargeCustom
					document.getElementById("amount2").value=this.money
					document.getElementById("business2").value = this.account
					document.getElementById("sform-2").submit()
				},
				checkTicket() {
					this.ticket = localStorage.getItem("ticket");
					if(this.ticket == "") {
						window.location.href = "login.html"
						return 
					}
					this.clearLinkTimer()
					this.clearTimer()
				},
				//跳转到登录页面
				toLoginView(res) {
					if(res.body.code == "302") {
						window.location.href = "login.html"
					}
				},
				//分页获取所有的汉服
				getLinkman() {
					this.$http.get('/user/getLinkman/',
					{params : {time:new Date().getTime()}})
					.then(function(res){
						this.toLoginView(res)
						this.linkMan = res.body.data
					},function() {
						console.log('请求失败处理');
					});
				},
				toDetailView(index){
					this.indexTemp = index
					this.linkMan[index].view.count = 0
					this.userID = this.linkMan[index].view.user.id
					this.clearTimer()
					this.getMessageDetail()
					this.createTimer()
				},
				getMessageDetail() {
					this.$http.get('/user/getMessageDetail/',
					{params : {time:new Date().getTime(), userID:this.userID}})
					.then(function(res){
						this.toLoginView(res)
						this.message = res.body.data
					},function() {
						console.log('请求失败处理');
					});
				},
				getTakeMessage(){
					this.$http.get('/user/getTakeMessage/',
					{params : {time:new Date().getTime(), userID:this.userID}})
					.then(function(res){
						this.toLoginView(res)
						var message = res.body.data
						for (let i = 0; i < message.length; i++) {
							this.message.push(message[i])
						}
					},function() {
						console.log('请求失败处理');
					});
				},
				//添加消息
				sendMessage(){
					var temp = this.content
					if(this.content.indexOf("[") != -1 && this.content.indexOf("]") != -1){
						
						var urls = this.takeUrl.split(",")
						for (let i = 0; i < urls.length - 1; i++) {
							var start = temp.indexOf("[")
							var end = temp.indexOf("]")
							if(start == 0){
								temp = urls[i] + temp.substring(end + 1)
							} else {
								temp = temp.substring(0, start) + urls[i] + temp.substring(end + 1)
							}
						}
					}
					
					if(this.userID == 0) {
						return ;
					}
					if(this.content == "" && this.image == ""){
						return
					}
					this.content = ""
					this.takeUrl = ""
					var formData = new FormData();
					formData.append('content', temp);
					formData.append('toUserID', this.userID);
					if(this.image == "") {
						this.$http.post('/user/addMessage/', formData).
						then(function (res) {
							if(res.body.eor){
								alert(res.body.eor)
							}
							if(res.body.member) {
								this.toView(1)
								return ;
							}
							this.toLoginView(res)
							this.content = ""
							this.message.push(res.body.message)
						}, function (res) {
						  console.log(res.body);
						});
						return 
					}
					formData.append('image', this.image);
					this.$http.post('/user/addMessageImage/', formData).
					then(function (res) {
						if(res.body.eor){
							alert(res.body.eor)
						}
						if(res.body.member) {
							this.toView(1)
							return ;
						}
						this.toLoginView(res)
						this.content = ""
						this.image = ""
						this.showImage = ""
						this.message.push(res.body.message)
					}, function (res) {
					  console.log(res.body);
					});
				},
				clearLinkTimer(){
					clearInterval(this.linkTimer)
				},
				clearTimer(){
					clearInterval(this.timer)
				},
				createLinkTimer(){
					this.linkTimer = setInterval(this.getLinkman, 2000)
				},
				createTimer() {
					this.timer = setInterval(this.getTakeMessage, 4000)
				},
				logout(){
					this.$http.get('/user/logout/',
						{params : {time:new Date().getTime()}})
					.then(function(res) {
						window.location.href = "login.html"
					},function() {
						console.log('请求失败处理');
					});
				},
				change() {
					if(this.languageID == 1) {
						this.topLabel = ["个人资料", "消息", "退出", "升级", "充值", "主页"]
						this.payTop = ["升级", "账户充值"],
						this.upgradeLabel = ["为自己升级", "为别人升级"],
						this.rechargeLabel = ["为自己充值", "为别人充值"],
						this.searchLabel = "搜索",
						this.typeLabel = ["皇冠会员", "钻石会员"],
						this.upgrade1 = ["尽情聊天", "查看谁喜欢你", "认识更多单身异性", "让你倍受瞩目", "每日3000字内翻译", "更多展示机会"]
						this.btnLabel = ["用户名", "立即支付", "自由输入"]
					} else if(this.languageID == 2) {
						this.topLabel = ["個人資料", "消息", "退出", "升级", "充值", "主頁"]
						this.payTop = ["升级", "賬戶充值"],
						this.upgradeLabel = ["為自己升級", "為別人升級"],
						this.rechargeLabel = ["為自己充值", "為別人充值"],
						this.searchLabel = "搜索",
						this.typeLabel = ["皇冠會員", "鉆石會員"],
						this.upgrade1 = ["盡情聊天", "查看誰喜歡妳", "認識更多單身異性", "讓妳倍受矚目", "每日3000字內翻譯", "更多展示機會"]
						this.btnLabel = ["用戶名", "立即支付", "自由輸入"]
					} else if(this.languageID == 3) {
						this.topLabel = ["personal data", "message", "log out", "upgrade", "top up", "home"]
						this.payTop = ["upgrade", "account recharge"],
						this.upgradeLabel = ["Upgrade yourself", "Upgrade for someone else"],
						this.rechargeLabel = ["Top up for yourself", "Top up for someone else"],
						this.searchLabel = "search",
						this.typeLabel = ["Crown members", "Diamond membership"],
						this.upgrade1 = ["Enjoy chatting", "Find out who likes you", "Meet more single people", "high-profile", "Daily translation within 3000 words", "More presentation opportunities"]
						this.btnLabel = ["username", "Pay now", "Free to enter"]
					} else if(this.languageID == 4) {
						this.topLabel = ["인적 사항", "소식.정보.", "퇴출", "승급하다", "충전시키다", "홈페이지."]
						this.payTop = ["승급하다", "계정 충전"],
						this.upgradeLabel = ["한 단계 업그레이드", "다른 사람을 업그레이드시키다"],
						this.rechargeLabel = ["자신을 위해 충당하다.", "다른 사람을 위해 충당하다"],
						this.searchLabel = "검색하다",
						this.typeLabel = ["크라운 회원", "다이아몬드 회원"],
						this.upgrade1 = ["맘껏 한담하다", "누가 당신을 좋아하는지 확인해보세요.", "솔로 이성을 더 많이 알게 됩니다.", "많은 주목을 받고 있습니다.", "매일 3000자로 번역하다", "더 많은 전시 기회"]
						this.btnLabel = ["아이디", "지금 지불하다", "자유입력"]
					} else if(this.languageID == 5) {
						this.topLabel = ["个人资料", "しょうそく", "たいしゅつ", "進級する", "リチャージ", "ホームページ"]
						this.payTop = ["進級する", "アカウントチャージ"],
						this.upgradeLabel = ["自分をアップグレードする", "人のためになる"],
						this.rechargeLabel = ["自分にチャージする", "他人にチャージする"],
						this.searchLabel = "名·他サ",
						this.typeLabel = ["クラウン会員", "ダイヤモンド会員"],
						this.upgrade1 = ["思う存分話す", "誰があなたを好きか調べて", "独身異性をより多く知る", "注目されている", "1日3000字以内に翻訳する", "より多くの展示機会"]
						this.btnLabel = ["ゆーざめい", "即時支払い", "ふりーふぉーむにゅうりょく"]
					} else if(this.languageID == 6) {
						this.topLabel = ["ข้อมูลส่วนบุคคล", "ข่าว", "ออก", "อัพ เกรด", "ชาร์จ", "บ้าน"]
						this.payTop = ["อัพ เกรด", "บัญชีเติมเงิน"],
						this.upgradeLabel = ["อัพเกรดด้วยตัวคุณเอง", "อัพเกรดสําหรับผู้อื่น"],
						this.rechargeLabel = ["เติมเงินด้วยตัวคุณเอง", "เติมเงินให้คนอื่น"],
						this.searchLabel = "ค้น หา",
						this.typeLabel = ["สมาชิกคราวน์", "สมาชิกเพชร"],
						this.upgrade1 = ["สนทนา", "ดูว่าใครถูกใจคุณ", "พบกับซิงเกิ้ลมากขึ้นและเพศตรงข้าม", "มันดูน่าสนใจมาก", "3000 คําต่อวัน", "ผลงานเพิ่มเติม"]
						this.btnLabel = ["ชื่อผู้ใช้", "จ่ายทันที", "ป้อนข้อมูลฟรี"]
					}
				},
				setWidth(){
					console.log(this.$refs.messageLink.offsetWidth)
					this.linkWidth = this.$refs.messageLink.offsetWidth + 17
				}
			},
			mounted() {
				this.createLinkTimer()
				this.setWidth()
			},
			beforeMount() {
				this.getLinkman()
			},
			beforeDestroy() {
				this.checkTicket()
				this.getAccount()
			}
		})
	</script>
</html>
